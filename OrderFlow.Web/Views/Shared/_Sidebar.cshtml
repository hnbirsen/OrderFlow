@using Microsoft.AspNetCore.Http
@using OrderFlow.Web.Helpers
@{
    var role = Context.Session.GetString("role");
    var menuItems = SidebarMenuConfig.GetMenuItems()
        .Where(item => item.RequiredRoles.Contains(role));
}
<aside class="sidebar" id="sidebar">
	<div class="sidebar-header">
		<div class="brand">
			<div class="brand-mark">O</div>
			<div class="brand-name">OrderFlow</div>
		</div>
		<button class="sidebar-toggle" type="button" id="sidebarToggle" aria-label="Toggle sidebar">
			<span class="toggle-icon"><i class="bi bi-arrows-collapse-vertical"></i></span>
		</button>
	</div>

	<nav class="nav">
		@foreach (var item in menuItems)
		{
			<a asp-controller="@item.Controller" asp-action="@item.Action" active-class="nav-item--active" class="nav-item" title="@item.Title">
				<span class="nav-ico" aria-hidden="true"><i class="@item.IconClass"></i></span>
				<span class="nav-text">@item.Title</span>
			</a>
		}
	</nav>
	<form asp-controller="Account" asp-action="Logout" method="post" style="display:inline;">
		<button type="submit" class="logout" title="Log out">
			<span class="nav-ico" aria-hidden="true"><i class="bi bi-box-arrow-left"></i></span>
			<span class="nav-text">Log out</span>
		</button>
	</form>
</aside>

